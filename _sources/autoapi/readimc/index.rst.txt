:py:mod:`readimc`
=================

.. py:module:: readimc

.. autoapi-nested-parse::

   Python package for reading Fluidigm(R) Imaging Mass Cytometry(TM) files



Subpackages
-----------
.. toctree::
   :titlesonly:
   :maxdepth: 3

   data/index.rst


Package Contents
----------------

Classes
~~~~~~~

.. autoapisummary::

   readimc.IMCFileBase
   readimc.IMCTxtFile
   readimc.IMCMcdFile




.. py:class:: IMCFileBase(path)

   Bases: :py:obj:`abc.ABC`

   Shared Fluidigm(R) IMC(TM) file interface

   .. py:method:: path(self)
      :property:

      Path to the Fluidigm(R) IMC(TM) file


   .. py:method:: read_acquisition(self, *kwargs)
      :abstractmethod:

      Reads IMC(TM) acquisition data as numpy array.

      :return: the acquisition data as 32-bit floating point array,
          shape: (c, y, x)



.. py:class:: IMCTxtFile(path)

   Bases: :py:obj:`readimc.IMCFileBase`, :py:obj:`readimc.data.AcquisitionBase`

   A class for reading Fluidigm(R) IMC(TM) TXT files

   :param path: path to the Fluidigm(R) IMC(TM) TXT file

   .. py:method:: num_channels(self)
      :property:

      Number of channels


   .. py:method:: channel_metals(self)
      :property:

      Symbols of metal isotopes (e.g. ``["Ag", "Ir"]``)


   .. py:method:: channel_masses(self)
      :property:

      Atomic masses of metal isotopes (e.g. ``[107, 191]``)


   .. py:method:: channel_labels(self)
      :property:

      Channel labels (user-provided)


   .. py:method:: open(self)

      Opens the Fluidigm(R) IMC(TM) TXT file for reading.

      It is good practice to use context managers whenever possible:

      .. code-block:: python

          with IMCTxtFile("/path/to/file.txt") as f:
              pass



   .. py:method:: close(self)

      Closes the Fluidigm(R) IMC(TM) TXT file.

      It is good practice to use context managers whenever possible:

      .. code-block:: python

          with IMCTxtFile("/path/to/file.txt") as f:
              pass



   .. py:method:: read_acquisition(self, *args)

      Reads IMC(TM) acquisition data as numpy array.

      .. note::
          This function takes a variable number of arguments for
          compatibility with ``IMCMcdFile``.

      :return: the acquisition data as 32-bit floating point array,
          shape: (c, y, x)


   .. py:method:: path(self)
      :property:

      Path to the Fluidigm(R) IMC(TM) file


   .. py:method:: channel_names(self)
      :property:

      Unique channel names in the format ``f"{metal}{mass}"`` (e.g.
      ``["Ag107", "Ir191"]``)



.. py:class:: IMCMcdFile(path)

   Bases: :py:obj:`readimc.IMCFileBase`

   A class for reading Fluidigm(R) IMC(TM) MCD(TM) files

   :param path: path to the Fluidigm(R) IMC(TM) MCD(TM) file

   .. py:method:: xml(self)
      :property:

      Full metadata in proprietary Fluidigm(R) XML format


   .. py:method:: xmlns(self)
      :property:

      XML namespace of full metadata in proprietary Fluidigm(R) XML
      format


   .. py:method:: slides(self)
      :property:

      Metadata on slides contained in this Fluidigm(R) IMC(TM) MCD(TM)
      file


   .. py:method:: open(self)

      Opens the Fluidigm(R) IMC(TM) MCD(TM) file for reading.

      It is good practice to use context managers whenever possible:

      .. code-block:: python

          with IMCMcdFile("/path/to/file.mcd") as f:
              pass



   .. py:method:: close(self)

      Closes the Fluidigm(R) IMC(TM) MCD(TM) file.

      It is good practice to use context managers whenever possible:

      .. code-block:: python

          with IMCMcdFile("/path/to/file.mcd") as f:
              pass



   .. py:method:: read_acquisition(self, acquisition)

      Reads IMC(TM) acquisition data as numpy array.

      :param acquisition: the acquisition to read
      :return: the acquisition data as 32-bit floating point array,
          shape: (c, y, x)


   .. py:method:: read_slide(self, slide)

      Reads and decodes a slide image as numpy array using the ``imageio``
      package.

      .. note::
          Slide images are stored as binary data within the Fluidigm(R)
          IMC(TM) MCD(TM) file in an arbitrary encoding. The ``imageio``
          package can decode most commonly used image file formats, but may
          fail for more obscure, in which case an ``IOException`` is raised.

      :param slide: the slide to read
      :return: the slide image, or ``None`` if no image is available for the
          specified slide


   .. py:method:: read_panorama(self, panorama)

      Reads and decodes a panorama image as numpy array using the
      ``imageio`` package.

      :param panorama: the panorama to read
      :return: the panorama image as numpy array


   .. py:method:: read_before_ablation_image(self, acquisition)

      Reads and decodes a before-ablation image as numpy array using the
      ``imageio`` package.

      :param acquisition: the acquisition for which to read the
          before-ablation image
      :return: the before-ablation image as numpy array, or ``None`` if no
          before-ablation image is available for the specified acquisition


   .. py:method:: read_after_ablation_image(self, acquisition)

      Reads and decodes a after-ablation image as numpy array using the
      ``imageio`` package.

      :param acquisition: the acquisition for which to read the
          after-ablation image
      :return: the after-ablation image as numpy array, or ``None`` if no
          after-ablation image is available for the specified acquisition


   .. py:method:: path(self)
      :property:

      Path to the Fluidigm(R) IMC(TM) file



